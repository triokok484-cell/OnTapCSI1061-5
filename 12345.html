<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSI FPTU - C√¥ng c·ª• √în t·∫≠p N√¢ng cao</title>
    <style>
        :root {
            --fpt-blue: #0055a5;
            --fpt-orange: #f26f21;
            --info-blue: #007bff;
            --text-color: #333;
            --bg-color: #f8f9fa;
            --container-bg: #ffffff;
            --highlight-bg: #fff3cd;
            --highlight-text: #856404;
            --correct-bg: #d4edda;
            --correct-border: #c3e6cb;
            --incorrect-bg: #f8d7da;
            --incorrect-border: #f5c6cb;
            --explanation-bg: #e2e3e5;
        }
        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, 'Helvetica Neue', sans-serif;
            line-height: 1.7;
            margin: 0;
            padding: 20px;
            background-color: var(--bg-color);
            color: var(--text-color);
        }
        .container {
            max-width: 960px;
            margin: auto;
            background: var(--container-bg);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        header {
            text-align: center;
            border-bottom: 3px solid var(--fpt-blue);
            padding-bottom: 15px;
            margin-bottom: 25px;
        }
        header h1 {
            color: var(--fpt-blue);
            margin: 0 0 5px 0;
        }
        .lang-switcher {
            margin-top: 15px;
        }
        .lang-switcher button {
            padding: 6px 12px;
            border: 1px solid #ccc;
            background-color: #f0f0f0;
            cursor: pointer;
            margin: 0 5px;
            border-radius: 5px;
            font-size: 14px;
        }
        .lang-switcher button.active {
            background-color: var(--fpt-blue);
            color: white;
            border-color: var(--fpt-blue);
        }
        .tab-nav {
            display: flex;
            margin-bottom: 25px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .tab-link {
            flex: 1;
            padding: 15px;
            cursor: pointer;
            border: none;
            background-color: #e9ecef;
            font-size: 16px;
            font-weight: 500;
            transition: background-color 0.3s, color 0.3s;
            text-align: center;
        }
        .tab-link.active {
            background-color: var(--fpt-orange);
            color: white;
        }
        .tab-link:hover:not(.active) {
            background-color: #dee2e6;
        }
        .tab-pane { display: none; }
        .tab-pane.active { display: block; }
        
        .theory-content h2 { color: var(--fpt-blue); border-bottom: 2px solid var(--fpt-orange); padding-bottom: 5px; }
        .theory-content h3 { color: #333; margin-top: 25px; }
        .theory-content h4 { color: #555; margin-top: 20px; }
        .theory-content ul { list-style-type: none; padding-left: 0; }
        .theory-content li { background: #f8f9fa; margin-bottom: 10px; padding: 15px; border-left: 4px solid var(--fpt-blue); border-radius: 5px; }
        .theory-content ul ul { margin-top: 10px; }
        .theory-content li li { background: #e9ecef; border-left-color: var(--fpt-orange); }
        .theory-content code, .theory-content pre {
            font-family: Consolas, 'Courier New', monospace;
            background-color: #e9ecef;
            padding: 2px 5px;
            border-radius: 4px;
        }
        .theory-content pre {
            padding: 15px;
            line-height: 1.5;
            white-space: pre-wrap;
            word-wrap: break-word;
            border-left: 4px solid #ccc;
        }

        .highlight {
            background-color: var(--highlight-bg);
            padding: 3px 6px;
            border-radius: 4px;
            font-weight: bold;
            color: var(--highlight-text);
        }
        .quiz-view, .quiz-setup, .quiz-results { display: none; }
        .quiz-container, .quiz-setup, .quiz-results {
            border: 1px solid #dee2e6;
            padding: 25px;
            margin-top: 25px;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .quiz-question {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 20px;
        }
        .quiz-options button {
            display: block;
            width: 100%;
            text-align: left;
            padding: 14px;
            margin: 8px 0;
            border: 1px solid #ccc;
            background-color: var(--container-bg);
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
            font-size: 16px;
        }
        .quiz-options button:hover:not([disabled]) {
            background-color: #e9e9e9;
            border-color: #aaa;
        }
        .quiz-options button.correct {
            background-color: var(--correct-bg);
            border-color: var(--correct-border);
            font-weight: bold;
        }
        .quiz-options button.incorrect {
            background-color: var(--incorrect-bg);
            border-color: var(--incorrect-border);
        }
        .explanation-box {
            margin-top: 15px;
            padding: 15px;
            background-color: var(--explanation-bg);
            border-radius: 6px;
            border: 1px solid #ced4da;
        }
        .button-group button, .quiz-setup button, .quiz-results button, .quiz-setup input {
            padding: 12px 22px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 6px;
            margin: 10px 5px 10px 0;
            border: none;
            font-weight: 500;
        }
        .quiz-setup input {
            width: 80px;
            border: 1px solid #ccc;
            border-radius: 6px;
            text-align: center;
        }
        .primary-button { background-color: var(--fpt-blue); color: white; }
        .secondary-button { background-color: #6c757d; color: white; }
        .info-button { background-color: var(--info-blue); color: white; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 data-lang-key="title">CSI FPTU - C√¥ng c·ª• √în t·∫≠p N√¢ng cao</h1>
            <p data-lang-key="subtitle">Ch·ªçn ch∆∞∆°ng ƒë·ªÉ h·ªçc l√Ω thuy·∫øt ho·∫∑c l√†m b√†i t·∫≠p tr·∫Øc nghi·ªám.</p>
            <div class="lang-switcher">
                <button onclick="switchLanguage('vi')" class="active" data-lang-key="vietnamese">Ti·∫øng Vi·ªát</button>
                <button onclick="switchLanguage('en')" data-lang-key="english">English</button>
            </div>
        </header>

        <div class="tab-nav">
            <button class="tab-link active" onclick="switchTab('chapter1')" data-lang-key="ch1">Ch∆∞∆°ng 1</button>
            <button class="tab-link" onclick="switchTab('chapter2')" data-lang-key="ch2">Ch∆∞∆°ng 2</button>
            <button class="tab-link" onclick="switchTab('chapter3')" data-lang-key="ch3">Ch∆∞∆°ng 3</button>
            <button class="tab-link" onclick="switchTab('chapter4')" data-lang-key="ch4">Ch∆∞∆°ng 4</button>
            <button class="tab-link" onclick="switchTab('chapter5')" data-lang-key="ch5">Ch∆∞∆°ng 5</button>
        </div>

        <div class="tab-content">
            <!-- Content will be generated by JavaScript -->
        </div>
    </div>

    <script>
        // --- START: NG√ÇN H√ÄNG C√ÇU H·ªéI V√Ä L√ù THUY·∫æT ---
        const contentData = {
            chapter1: {
                theory: {
                    vi: `
                        <h2>Ch∆∞∆°ng 1: Gi·ªõi thi·ªáu T·ªïng quan</h2>
                        <h3>1. C√°c m√¥ h√¨nh m√°y t√≠nh c∆° b·∫£n</h3>
                        <ul>
                            <li>
                                <strong>M√¥ h√¨nh Turing (Turing Model):</strong>
                                <ul>
                                    <li>ƒê·ªãnh nghƒ©a m√°y t√≠nh nh∆∞ m·ªôt <span class="highlight">b·ªô x·ª≠ l√Ω d·ªØ li·ªáu c√≥ th·ªÉ l·∫≠p tr√¨nh ƒë∆∞·ª£c (programmable data processor)</span>.</li>
                                    <li>ƒê√¢y l√† m·ªôt m√¥ h√¨nh l√Ω thuy·∫øt, to√°n h·ªçc, kh√¥ng ph·∫£i ki·∫øn tr√∫c v·∫≠t l√Ω.</li>
                                    <li>C√¥ng th·ª©c c·ªët l√µi: <strong>D·ªØ li·ªáu ƒë·∫ßu v√†o + Ch∆∞∆°ng tr√¨nh -> M√°y t√≠nh -> D·ªØ li·ªáu ƒë·∫ßu ra</strong>.</li>
                                </ul>
                            </li>
                            <li>
                                <strong>M√¥ h√¨nh von Neumann (von Neumann Model):</strong>
                                <ul>
                                    <li>M√¥ h√¨nh ki·∫øn tr√∫c cho h·∫ßu h·∫øt c√°c m√°y t√≠nh hi·ªán ƒë·∫°i.</li>
                                    <li><span class="highlight">Kh√°i ni·ªám ƒë·ªôt ph√°: Ch∆∞∆°ng tr√¨nh ƒë∆∞·ª£c l∆∞u trong b·ªô nh·ªõ (Stored Program Concept)</span>. C·∫£ ch∆∞∆°ng tr√¨nh v√† d·ªØ li·ªáu ƒë·ªÅu ƒë∆∞·ª£c l∆∞u tr·ªØ trong c√πng m·ªôt b·ªô nh·ªõ v√† c√≥ c√πng ƒë·ªãnh d·∫°ng (nh·ªã ph√¢n).</li>
                                </ul>
                            </li>
                        </ul>
                    `,
                    en: `
                        <h2>Chapter 1: Introduction</h2>
                        <h3>1. Basic Computer Models</h3>
                        <ul>
                            <li>
                                <strong>Turing Model:</strong>
                                <ul>
                                    <li>Defines a computer as a <span class="highlight">programmable data processor</span>.</li>
                                    <li>This is a theoretical, mathematical model, not a physical architecture.</li>
                                    <li>Core formula: <strong>Input Data + Program -> Computer -> Output Data</strong>.</li>
                                </ul>
                            </li>
                            <li>
                                <strong>von Neumann Model:</strong>
                                <ul>
                                    <li>The architectural model for most modern computers.</li>
                                    <li><span class="highlight">Breakthrough concept: The Stored Program Concept</span>. Both the program (instructions) and data are stored in the same memory and share the same format (binary).</li>
                                </ul>
                            </li>
                        </ul>
                    `
                },
                questions: [
                    { q: { vi: "M√¥ h√¨nh n√†o ƒë·ªãnh nghƒ©a kh√°i ni·ªám 'Stored Program Concept'?", en: "Which model defines the 'Stored Program Concept'?" }, o: [{ vi: "M√¥ h√¨nh Turing", en: "Turing Model" }, { vi: "M√¥ h√¨nh von Neumann", en: "von Neumann Model" }, { vi: "M√¥ h√¨nh Pascal", en: "Pascal Model" }, { vi: "M√¥ h√¨nh Babbage", en: "Babbage Model" }], a: 1, explanation: { vi: "Von Neumann = Ch∆∞∆°ng tr√¨nh trong B·ªô nh·ªõ.", en: "Von Neumann = Program in Memory." } }
                ]
            },
            chapter2: {
                 theory: {
                     vi: `
                        <h2>Ch∆∞∆°ng 2: H·ªá th·ªëng S·ªë</h2>
                        <h3>1. C√°c h·ªá ƒë·∫øm c∆° b·∫£n (Positional Number Systems)</h3>
                        <ul>
                            <li><strong>Kh√°i ni·ªám:</strong> Gi√° tr·ªã c·ªßa m·ªôt ch·ªØ s·ªë ph·ª• thu·ªôc v√†o <span class="highlight">v·ªã tr√≠</span> c·ªßa n√≥ trong chu·ªói s·ªë. M·ªói v·ªã tr√≠ c√≥ m·ªôt tr·ªçng s·ªë l√† l≈©y th·ª´a c·ªßa c∆° s·ªë.</li>
                            <li><strong>C√°c h·ªá ƒë·∫øm ch√≠nh:</strong> Binary (2), Octal (8), Decimal (10), Hexadecimal (16).</li>
                        </ul>
                        <h3>2. V√≠ d·ª• v·ªÅ Chuy·ªÉn ƒë·ªïi</h3>
                        <h4>Chuy·ªÉn t·ª´ h·ªá b·∫•t k·ª≥ sang Th·∫≠p ph√¢n</h4>
                        <pre><strong>V√≠ d·ª•: (2AE)‚ÇÅ‚ÇÜ sang th·∫≠p ph√¢n (A=10, E=14)</strong>
N = 2√ó16¬≤ + 10√ó16¬π + 14√ó16‚Å∞
  = 2√ó256 + 160 + 14 = 686‚ÇÅ‚ÇÄ</pre>
                        <h4>Chuy·ªÉn t·ª´ Th·∫≠p ph√¢n sang h·ªá b·∫•t k·ª≥</h4>
                        <pre><strong>V√≠ d·ª•: 35‚ÇÅ‚ÇÄ sang nh·ªã ph√¢n (chia cho 2)</strong>
35 / 2 = 17 d∆∞ 1  ‚Üë
17 / 2 = 8  d∆∞ 1  |
 8 / 2 = 4  d∆∞ 0  | ƒê·ªçc ng∆∞·ª£c t·ª´ d∆∞·ªõi l√™n
 4 / 2 = 2  d∆∞ 0  |
 2 / 2 = 1  d∆∞ 0  |
 1 / 2 = 0  d∆∞ 1  ‚Üë
K·∫øt qu·∫£: (100011)‚ÇÇ</pre>
                        <h4>Chuy·ªÉn ƒë·ªïi nhanh Binary ‚Üî Hexadecimal</h4>
                        <pre><strong>V√≠ d·ª•: (10011100010)‚ÇÇ sang Hexadecimal (gom nh√≥m 4 bit)</strong>
  0100  1110  0010  (Th√™m 0 v√†o ƒë·∫ßu)
    ‚Üì     ‚Üì     ‚Üì
    4     E     2
K·∫øt qu·∫£: (4E2)‚ÇÅ‚ÇÜ</pre>
                    `,
                    en: `
                        <h2>Chapter 2: Number Systems</h2>
                        <h3>1. Positional Number Systems</h3>
                        <ul>
                            <li><strong>Concept:</strong> The value of a digit depends on its <span class="highlight">position</span> within the number string. Each position has a place value, which is a power of the base.</li>
                            <li><strong>Main Systems:</strong> Binary (2), Octal (8), Decimal (10), Hexadecimal (16).</li>
                        </ul>
                        <h3>2. Conversion Examples</h3>
                        <h4>Convert from Any Base to Decimal</h4>
                        <pre><strong>Example: (2AE)‚ÇÅ‚ÇÜ to decimal (A=10, E=14)</strong>
N = 2√ó16¬≤ + 10√ó16¬π + 14√ó16‚Å∞
  = 2√ó256 + 160 + 14 = 686‚ÇÅ‚ÇÄ</pre>
                        <h4>Convert from Decimal to Any Base</h4>
                        <pre><strong>Example: 35‚ÇÅ‚ÇÄ to binary (divide by 2)</strong>
35 / 2 = 17 rem 1  ‚Üë
17 / 2 = 8  rem 1  |
 8 / 2 = 4  rem 0  | Read in reverse
 4 / 2 = 2  rem 0  | order
 2 / 2 = 1  rem 0  |
 1 / 2 = 0  rem 1  ‚Üë
Result: (100011)‚ÇÇ</pre>
                        <h4>Quick Conversion Binary ‚Üî Hexadecimal</h4>
                        <pre><strong>Example: (10011100010)‚ÇÇ to Hexadecimal (group of 4 bits)</strong>
  0100  1110  0010  (Pad with leading zeros)
    ‚Üì     ‚Üì     ‚Üì
    4     E     2
Result: (4E2)‚ÇÅ‚ÇÜ</pre>
                    `
                },
                questions: [
                     { q: { vi: "M·ªôt ch·ªØ s·ªë th·∫≠p l·ª•c ph√¢n (hex digit) t∆∞∆°ng ·ª©ng v·ªõi bao nhi√™u bit?", en: "One hexadecimal digit corresponds to how many bits?"}, o: [ {vi: "2 bit", en: "2 bits"}, {vi: "3 bit", en: "3 bits"}, {vi: "4 bit", en: "4 bits"}, {vi: "8 bit", en: "8 bits"}], a: 2, explanation: {vi: "V√¨ 16 = 2‚Å¥, m·ªói ch·ªØ s·ªë th·∫≠p l·ª•c ph√¢n c√≥ th·ªÉ bi·ªÉu di·ªÖn m·ªôt t·ªï h·ª£p duy nh·∫•t c·ªßa 4 bit.", en: "Because 16 = 2‚Å¥, each hexadecimal digit can represent a unique combination of 4 bits."}}
                ]
            },
            chapter3: {
                theory: {
                    vi: `
                        <h2>Ch∆∞∆°ng 3: L∆∞u tr·ªØ D·ªØ li·ªáu</h2>
                        <p>Ch∆∞∆°ng n√†y gi·∫£i th√≠ch c√°ch c√°c lo·∫°i d·ªØ li·ªáu kh√°c nhau ƒë∆∞·ª£c bi·ªÉu di·ªÖn d∆∞·ªõi d·∫°ng c√°c chu·ªói bit (0 v√† 1) ƒë·ªÉ m√°y t√≠nh c√≥ th·ªÉ l∆∞u tr·ªØ v√† x·ª≠ l√Ω.</p>
                        <h3>1. L∆∞u tr·ªØ s·ªë nguy√™n (Storing Integers)</h3>
                        <ul>
                            <li><strong>S·ªë nguy√™n kh√¥ng d·∫•u (Unsigned Integers):</strong> D√πng ƒë·ªÉ bi·ªÉu di·ªÖn c√°c s·ªë kh√¥ng √¢m (0, 1, 2, ...). V·ªõi n bit, ta c√≥ th·ªÉ bi·ªÉu di·ªÖn c√°c s·ªë t·ª´ 0 ƒë·∫øn 2‚Åø-1.</li>
                            <li><strong>S·ªë nguy√™n c√≥ d·∫•u (Signed Integers):</strong>
                                <ul>
                                    <li><strong>D·∫•u v√† ƒê·ªô l·ªõn (Sign-and-Magnitude):</strong> D√πng bit ƒë·∫ßu ti√™n l√†m bit d·∫•u (0=d∆∞∆°ng, 1=√¢m). C√≥ nh∆∞·ª£c ƒëi·ªÉm l√† t·ªìn t·∫°i hai bi·ªÉu di·ªÖn cho s·ªë 0 (+0 v√† -0).</li>
                                    <li><strong>B√π 2 (Two's Complement):</strong> Ph∆∞∆°ng ph√°p ti√™u chu·∫©n hi·ªán nay. N√≥ ch·ªâ c√≥ m·ªôt bi·ªÉu di·ªÖn cho s·ªë 0 v√† gi√∫p ƒë∆°n gi·∫£n h√≥a c√°c ph√©p to√°n tr·ª´.</li>
                                </ul>
                            </li>
                        </ul>
                    `,
                    en: `
                        <h2>Chapter 3: Data Storage</h2>
                        <p>This chapter explains how different data types are represented as bit patterns (0s and 1s) so they can be stored and processed by a computer.</p>
                        <h3>1. Storing Integers</h3>
                        <ul>
                            <li><strong>Unsigned Integers:</strong> Used to represent non-negative numbers (0, 1, 2, ...). With n bits, numbers from 0 to 2‚Åø-1 can be represented.</li>
                            <li><strong>Signed Integers:</strong>
                                <ul>
                                    <li><strong>Sign-and-Magnitude:</strong> Uses the first bit as a sign bit (0=positive, 1=negative). It has the drawback of having two representations for zero.</li>
                                    <li><strong>Two's Complement:</strong> The current standard method. It has only one representation for zero and simplifies subtraction operations.</li>
                                </ul>
                            </li>
                        </ul>
                    `
                },
                questions: [
                    { q: { vi: "H·∫ßu h·∫øt c√°c m√°y t√≠nh ng√†y nay s·ª≠ d·ª•ng ph∆∞∆°ng ph√°p bi·ªÉu di·ªÖn s·ªë nguy√™n n√†o ƒë·ªÉ l∆∞u tr·ªØ s·ªë nguy√™n c√≥ d·∫•u?", en: "Which integer representation do most computers today use to store signed integers?"}, o: [{vi: "Bi·ªÉu di·ªÖn kh√¥ng d·∫•u", en: "Unsigned representation"}, {vi: "Bi·ªÉu di·ªÖn d·∫•u-l∆∞·ª£ng", en: "Sign-and-magnitude representation"}, {vi: "Bi·ªÉu di·ªÖn b√π hai", en: "Two's complement representation"}, {vi: "Bi·ªÉu di·ªÖn b√π m·ªôt", en: "One's complement representation"}], a: 2, explanation: {vi: "B√π hai l√† ti√™u chu·∫©n v√¨ n√≥ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ hai s·ªë 0 v√† ƒë∆°n gi·∫£n h√≥a m·∫°ch logic cho ph√©p tr·ª´.", en: "Two's complement is the standard because it solves the two-zeros problem and simplifies the logic circuit for subtraction."}}
                ]
            },
            chapter4: {
                 theory: {
                    vi: `
                        <h2>Ch∆∞∆°ng 4: C√°c Ph√©p to√°n tr√™n D·ªØ li·ªáu</h2>
                        <h3>1. Ph√©p to√°n Logic (Logic Operations)</h3>
                        <ul>
                            <li><strong>·ª®ng d·ª•ng: D√πng m·∫∑t n·∫° (Masking)</strong>
                                <ul>
                                    <li><span class="highlight">Unsetting (X√≥a bit v·ªÅ 0):</span> D√πng ph√©p <strong>AND</strong> v·ªõi m·∫∑t n·∫° c√≥ bit 0 t·∫°i v·ªã tr√≠ c·∫ßn x√≥a.</li>
                                    <li><span class="highlight">Setting (B·∫≠t bit l√™n 1):</span> D√πng ph√©p <strong>OR</strong> v·ªõi m·∫∑t n·∫° c√≥ bit 1 t·∫°i v·ªã tr√≠ c·∫ßn b·∫≠t.</li>
                                    <li><span class="highlight">Flipping (L·∫≠t bit):</span> D√πng ph√©p <strong>XOR</strong> v·ªõi m·∫∑t n·∫° c√≥ bit 1 t·∫°i v·ªã tr√≠ c·∫ßn l·∫≠t.</li>
                                </ul>
                            </li>
                        </ul>
                        <h3>2. V√≠ d·ª• v·ªÅ Masking</h3>
                        <pre><strong>V√≠ d·ª•: X√≥a (unset) 5 bit ngo√†i c√πng b√™n tr√°i c·ªßa 10100110</strong>
  1010 0110   (D·ªØ li·ªáu g·ªëc)
& 0000 0111   (M·∫∑t n·∫° AND - 0 ·ªü v·ªã tr√≠ c·∫ßn x√≥a)
-----------
  0000 0110   (K·∫øt qu·∫£)</pre>
                        <h3>3. Ph√©p to√°n S·ªë h·ªçc (Arithmetic Operations)</h3>
                        <ul>
                            <li><span class="highlight">Ph√©p tr·ª´ A - B ƒë∆∞·ª£c th·ª±c hi·ªán b·∫±ng ph√©p c·ªông: A + (B√π 2 c·ªßa B)</span>.</li>
                        </ul>
                         <pre><strong>V√≠ d·ª•: (+24) + (-17) d√πng s·ªë b√π 2 8-bit</strong>
+24       = 0001 1000
-17       = 1110 1111  (B√π 2 c·ªßa 17)
-------------------
K·∫øt qu·∫£: (1)0000 0111  (B·ªè bit nh·ªõ cu·ªëi)
          = 7‚ÇÅ‚ÇÄ (ƒê√∫ng)</pre>
                    `,
                    en: `
                        <h2>Chapter 4: Operations on Data</h2>
                        <h3>1. Logic Operations</h3>
                        <ul>
                            <li><strong>Application: Masking</strong>
                                <ul>
                                    <li><span class="highlight">Unsetting a bit (to 0):</span> Use <strong>AND</strong> with a mask that has a 0 at the desired position.</li>
                                    <li><span class="highlight">Setting a bit (to 1):</span> Use <strong>OR</strong> with a mask that has a 1 at the desired position.</li>
                                    <li><span class="highlight">Flipping a bit:</span> Use <strong>XOR</strong> with a mask that has a 1 at the desired position.</li>
                                </ul>
                            </li>
                        </ul>
                        <h3>2. Masking Examples</h3>
                        <pre><strong>Example: Unset the five leftmost bits of 10100110</strong>
  1010 0110   (Original Data)
& 0000 0111   (AND Mask - 0s where you want to clear)
-----------
  0000 0110   (Result)</pre>
                        <h3>3. Arithmetic Operations</h3>
                        <ul>
                            <li><span class="highlight">Subtraction A - B is performed as an addition: A + (Two's complement of B)</span>.</li>
                        </ul>
                         <pre><strong>Example: (+24) + (-17) using 8-bit two's complement</strong>
+24       = 0001 1000
-17       = 1110 1111  (Two's complement of 17)
-------------------
Result: (1)0000 0111  (Discard final carry)
          = 7‚ÇÅ‚ÇÄ (Correct)</pre>
                    `
                },
                questions: [
                    { q: { vi: "ƒê·ªÉ 'unset' (t·∫Øt) m·ªôt bit c·ª• th·ªÉ (bu·ªôc v·ªÅ 0), ta n√™n s·ª≠ d·ª•ng ph√©p to√°n n√†o v·ªõi m·ªôt m·∫∑t n·∫°?", en: "To 'unset' (turn off) a specific bit (force to 0), which operation should be used with a mask?"}, o: [ {vi: "OR", en: "OR"}, {vi: "AND", en: "AND"}, {vi: "XOR", en: "XOR"}, {vi: "NOT", en: "NOT"}], a: 1, explanation: {vi: "AND v·ªõi 0 s·∫Ω lu√¥n cho k·∫øt qu·∫£ l√† 0.", en: "ANDing with 0 always results in 0."}}
                ]
            },
            chapter5: {
                 theory: {
                    vi: `
                        <h2>Ch∆∞∆°ng 5: T·ªï ch·ª©c M√°y t√≠nh</h2>
                        <h3>1. C√°c th√†nh ph·∫ßn ch√≠nh</h3>
                        <ul>
                            <li><strong>CPU (Central Processing Unit):</strong> "B·ªô n√£o" c·ªßa m√°y t√≠nh. G·ªìm 3 ph·∫ßn: ALU (t√≠nh to√°n), Control Unit (ƒëi·ªÅu khi·ªÉn), v√† Registers (thanh ghi).</li>
                            <li><strong>B·ªô nh·ªõ ch√≠nh (Main Memory):</strong> Th∆∞·ªùng l√† RAM, l∆∞u tr·ªØ ch∆∞∆°ng tr√¨nh v√† d·ªØ li·ªáu ƒëang ch·∫°y.</li>
                        </ul>
                        <h3>2. Ph√¢n c·∫•p b·ªô nh·ªõ (Memory Hierarchy)</h3>
                        <p>T·ªëc ƒë·ªô v√† gi√° th√†nh gi·∫£m d·∫ßn, dung l∆∞·ª£ng tƒÉng d·∫ßn:</p>
                        <p><span class="highlight">Registers ‚Üí Cache ‚Üí Main Memory ‚Üí Storage (·ªî c·ª©ng)</span></p>
                        <h3>3. Chu k·ª≥ m√°y (Machine Cycle)</h3>
                        <ul>
                             <li>Qu√° tr√¨nh CPU th·ª±c thi m·ªôt l·ªánh. G·ªìm 3 b∆∞·ªõc c∆° b·∫£n:
                                <ol>
                                    <li><span class="highlight">Fetch (N·∫°p l·ªánh):</span> L·∫•y l·ªánh t·ª´ b·ªô nh·ªõ.</li>
                                    <li><span class="highlight">Decode (Gi·∫£i m√£):</span> Hi·ªÉu xem l·ªánh y√™u c·∫ßu l√†m g√¨.</li>
                                    <li><span class="highlight">Execute (Th·ª±c thi):</span> Th·ª±c hi·ªán l·ªánh ƒë√≥.</li>
                                </ol>
                            </li>
                        </ul>
                    `,
                    en: `
                        <h2>Chapter 5: Computer Organization</h2>
                        <h3>1. Main Components</h3>
                        <ul>
                           <li><strong>CPU (Central Processing Unit):</strong> The "brain" of the computer. Contains 3 parts: ALU (calculation), Control Unit (control), and Registers.</li>
                            <li><strong>Main Memory:</strong> Usually RAM, stores currently running programs and data.</li>
                        </ul>
                        <h3>2. Memory Hierarchy</h3>
                        <p>Speed and cost decrease, while capacity increases:</p>
                        <p><span class="highlight">Registers ‚Üí Cache ‚Üí Main Memory ‚Üí Storage (Hard Drive)</span></p>
                        <h3>3. Machine Cycle</h3>
                        <ul>
                             <li>The repetitive process by which the CPU executes one instruction. Consists of 3 basic steps:
                                <ol>
                                    <li><span class="highlight">Fetch:</span> Get the instruction from memory.</li>
                                    <li><span class="highlight">Decode:</span> Understand what the instruction wants to do.</li>
                                    <li><span class="highlight">Execute:</span> Perform the instruction.</li>
                                </ol>
                            </li>
                        </ul>
                    `
                },
                questions: [
                    { q: { vi: "Ba th√†nh ph·∫ßn ch√≠nh c·ªßa CPU l√† g√¨?", en: "What are the three main components of a CPU?" }, o: [{ vi: "RAM, ROM, v√† Cache", en: "RAM, ROM, and Cache" }, { vi: "ALU, Control Unit, v√† Registers", en: "ALU, Control Unit, and Registers" }, { vi: "Data Bus, Address Bus, v√† Control Bus", en: "Data Bus, Address Bus, and Control Bus" }], a: 1, explanation: { vi: "CPU c√≥ b·ªô ph·∫≠n t√≠nh to√°n (ALU), b·ªô ph·∫≠n ch·ªâ huy (Control Unit), v√† b·ªô nh·ªõ si√™u nhanh t·∫°i ch·ªó (Registers).", en: "The CPU has a calculation part (ALU), a command part (Control Unit), and super-fast local memory (Registers)." } }
                ]
            }
        };
        // --- END: NG√ÇN H√ÄNG C√ÇU H·ªéI V√Ä L√ù THUY·∫æT ---

        // --- START: JAVASCRIPT LOGIC (HO√ÄN CH·ªàNH) ---
        let currentLang = 'vi';
        let currentChapter = 'chapter1';
        let quizState = {};

        document.addEventListener('DOMContentLoaded', () => {
            renderAllContent();
        });

        function renderAllContent() {
            const tabContent = document.querySelector('.tab-content');
            tabContent.innerHTML = '';
            let isFirstChapter = true;
            for (const chapterId in contentData) {
                const chapterDiv = document.createElement('div');
                chapterDiv.id = chapterId;
                chapterDiv.className = isFirstChapter ? 'tab-pane active' : 'tab-pane';
                isFirstChapter = false;

                chapterDiv.innerHTML = `
                    <div class="theory-view">
                        <div class="theory-content"></div>
                        <div class="button-group">
                            <button class="primary-button" onclick="showQuizSetup('${chapterId}')" data-lang-key="startQuiz"></button>
                            <button class="info-button" onclick="askAI()" data-lang-key="askAI"></button>
                        </div>
                    </div>
                    <div class="quiz-view">
                        <div class="quiz-setup">
                            <h3 data-lang-key="quizSetupTitle"></h3>
                            <div>
                                <label data-lang-key="numQuestions"></label>
                                <input type="number" id="num-questions-${chapterId}" value="10" min="1" max="${contentData[chapterId].questions.length}">
                            </div>
                            <div>
                                <button class="primary-button" onclick="startQuiz('${chapterId}')" data-lang-key="start"></button>
                                <button class="secondary-button" onclick="showTheory('${chapterId}')" data-lang-key="backToTheory"></button>
                            </div>
                        </div>
                        <div class="quiz-container" style="display:none;">
                            <div id="question-text-${chapterId}" class="quiz-question"></div>
                            <div id="quiz-options-${chapterId}" class="quiz-options"></div>
                            <div id="explanation-${chapterId}"></div>
                            <div class="button-group">
                                <button onclick="nextQuestion('${chapterId}')" id="next-btn-${chapterId}" class="primary-button" data-lang-key="nextQuestion" style="display:none;"></button>
                            </div>
                        </div>
                        <div class="quiz-results" style="display:none;">
                            <h3 data-lang-key="resultsTitle"></h3>
                            <p id="score-${chapterId}"></p>
                            <button class="secondary-button" onclick="showTheory('${chapterId}')" data-lang-key="backToTheory"></button>
                            <button class="primary-button" onclick="showQuizSetup('${chapterId}')" data-lang-key="retakeQuiz"></button>
                        </div>
                    </div>
                `;
                tabContent.appendChild(chapterDiv);
            }
            updateAllVisibleText();
        }

        function switchTab(chapterId) {
            currentChapter = chapterId;
            document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
            document.getElementById(chapterId).classList.add('active');
            
            document.querySelectorAll('.tab-link').forEach(l => l.classList.remove('active'));
            document.querySelector(`.tab-link[onclick="switchTab('${chapterId}')"]`).classList.add('active');
        }

        function switchLanguage(lang) {
            if (currentLang === lang) return;
            currentLang = lang;
            document.querySelectorAll('.lang-switcher button').forEach(b => b.classList.remove('active'));
            document.querySelector(`.lang-switcher button[onclick="switchLanguage('${lang}')"]`).classList.add('active');
            updateAllVisibleText();
        }
        
        const translations = {
            vi: {
                title: "CSI FPTU - C√¥ng c·ª• √în t·∫≠p N√¢ng cao",
                subtitle: "Ch·ªçn ch∆∞∆°ng ƒë·ªÉ h·ªçc l√Ω thuy·∫øt ho·∫∑c l√†m b√†i t·∫≠p tr·∫Øc nghi·ªám.",
                vietnamese: "Ti·∫øng Vi·ªát", english: "English",
                ch1: "Ch∆∞∆°ng 1", ch2: "Ch∆∞∆°ng 2", ch3: "Ch∆∞∆°ng 3", ch4: "Ch∆∞∆°ng 4", ch5: "Ch∆∞∆°ng 5",
                startQuiz: "L√†m b√†i t·∫≠p", quizSetupTitle: "Thi·∫øt l·∫≠p b√†i tr·∫Øc nghi·ªám",
                numQuestions: "S·ªë l∆∞·ª£ng c√¢u h·ªèi:", start: "B·∫Øt ƒë·∫ßu",
                backToTheory: "Quay l·∫°i L√Ω thuy·∫øt", nextQuestion: "C√¢u ti·∫øp theo",
                resultsTitle: "K·∫øt qu·∫£", scoreText: "B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng",
                retakeQuiz: "L√†m l·∫°i b√†i", askAI: "H·ªèi AI"
            },
            en: {
                title: "CSI FPTU - Advanced Study Tool",
                subtitle: "Select a chapter to study theory or take a multiple-choice quiz.",
                vietnamese: "Vietnamese", english: "English",
                ch1: "Chapter 1", ch2: "Chapter 2", ch3: "Chapter 3", ch4: "Chapter 4", ch5: "Chapter 5",
                startQuiz: "Start Quiz", quizSetupTitle: "Quiz Setup",
                numQuestions: "Number of questions:", start: "Start",
                backToTheory: "Back to Theory", nextQuestion: "Next Question",
                resultsTitle: "Results", scoreText: "You answered correctly",
                retakeQuiz: "Retake Quiz", askAI: "Ask AI"
            }
        };

        function updateAllVisibleText() {
            document.querySelectorAll('[data-lang-key]').forEach(el => {
                const key = el.getAttribute('data-lang-key');
                if (translations[currentLang][key]) {
                    el.textContent = translations[currentLang][key];
                }
            });

            for (const chapterId in contentData) {
                const theoryDiv = document.querySelector(`#${chapterId} .theory-content`);
                if (theoryDiv) {
                    theoryDiv.innerHTML = contentData[chapterId].theory[currentLang];
                }
            }

            if (quizState[currentChapter] && quizState[currentChapter].isActive) {
                redisplayCurrentQuestion();
            }
        }

        function redisplayCurrentQuestion() {
            const state = quizState[currentChapter];
            if (!state || !state.isActive || state.currentQuestionIndex >= state.questions.length) return;

            const question = state.questions[state.currentQuestionIndex];
            document.getElementById(`question-text-${currentChapter}`).textContent = `(${state.currentQuestionIndex + 1}/${state.questions.length}) ${question.q[currentLang]}`;
            
            const options = document.querySelectorAll(`#quiz-options-${currentChapter} button`);
            options.forEach((button, index) => {
                button.textContent = question.o[index][currentLang];
            });

            const explanationDiv = document.getElementById(`explanation-${currentChapter}`);
            if (explanationDiv.innerHTML !== '') {
                const explanationText = question.explanation ? question.explanation[currentLang] : '';
                explanationDiv.innerHTML = `<div class="explanation-box"><strong>üí° ${currentLang === 'vi' ? 'Gi·∫£i th√≠ch' : 'Explanation'}:</strong> ${explanationText}</div>`;
            }
        }
        
        function showQuizSetup(chapterId) {
            document.querySelector(`#${chapterId} .theory-view`).style.display = 'none';
            document.querySelector(`#${chapterId} .quiz-view`).style.display = 'block';
            document.querySelector(`#${chapterId} .quiz-setup`).style.display = 'block';
            document.querySelector(`#${chapterId} .quiz-container`).style.display = 'none';
            document.querySelector(`#${chapterId} .quiz-results`).style.display = 'none';
        }

        function showTheory(chapterId) {
            if(quizState[chapterId]) quizState[chapterId].isActive = false;
            document.querySelector(`#${chapterId} .theory-view`).style.display = 'block';
            document.querySelector(`#${chapterId} .quiz-view`).style.display = 'none';
        }

        function startQuiz(chapterId) {
            const allQuestions = contentData[chapterId].questions;
            const numQuestionsInput = document.getElementById(`num-questions-${chapterId}`);
            let numQuestions = parseInt(numQuestionsInput.value);
            if (isNaN(numQuestions) || numQuestions <= 0 || numQuestions > allQuestions.length) {
                numQuestions = Math.min(10, allQuestions.length);
                numQuestionsInput.value = numQuestions;
            }
            
            const questions = [...allQuestions].sort(() => 0.5 - Math.random()).slice(0, numQuestions);

            quizState[chapterId] = { questions, currentQuestionIndex: 0, score: 0, isActive: true };

            document.querySelector(`#${chapterId} .quiz-setup`).style.display = 'none';
            document.querySelector(`#${chapterId} .quiz-container`).style.display = 'block';
            document.querySelector(`#${chapterId} .quiz-results`).style.display = 'none';
            
            displayQuestion(chapterId);
        }

        function displayQuestion(chapterId) {
            const state = quizState[chapterId];
            if (state.currentQuestionIndex >= state.questions.length) {
                showResults(chapterId);
                return;
            }

            const question = state.questions[state.currentQuestionIndex];
            document.getElementById(`question-text-${chapterId}`).textContent = `(${state.currentQuestionIndex + 1}/${state.questions.length}) ${question.q[currentLang]}`;
            
            const optionsDiv = document.getElementById(`quiz-options-${chapterId}`);
            optionsDiv.innerHTML = '';
            question.o.forEach((option, index) => {
                const button = document.createElement('button');
                button.textContent = option[currentLang];
                button.onclick = () => selectAnswer(chapterId, index);
                optionsDiv.appendChild(button);
            });

            document.getElementById(`explanation-${chapterId}`).innerHTML = '';
            document.getElementById(`next-btn-${chapterId}`).style.display = 'none';
        }

        function selectAnswer(chapterId, selectedIndex) {
            const state = quizState[chapterId];
            const question = state.questions[state.currentQuestionIndex];
            const correctIndex = question.a;
            
            const options = document.querySelectorAll(`#${chapterId} .quiz-options button`);
            options.forEach(button => button.disabled = true);

            if (selectedIndex === correctIndex) {
                options[selectedIndex].classList.add('correct');
                state.score++;
            } else {
                options[selectedIndex].classList.add('incorrect');
                options[correctIndex].classList.add('correct');
                const explanationDiv = document.getElementById(`explanation-${chapterId}`);
                if(question.explanation) {
                    explanationDiv.innerHTML = `<div class="explanation-box"><strong>üí° ${currentLang === 'vi' ? 'Gi·∫£i th√≠ch' : 'Explanation'}:</strong> ${question.explanation[currentLang]}</div>`;
                }
            }
            document.getElementById(`next-btn-${chapterId}`).style.display = 'inline-block';
        }

        function nextQuestion(chapterId) {
            quizState[chapterId].currentQuestionIndex++;
            displayQuestion(chapterId);
        }

        function showResults(chapterId) {
            const state = quizState[chapterId];
            state.isActive = false;
            document.querySelector(`#${chapterId} .quiz-container`).style.display = 'none';
            const resultsDiv = document.querySelector(`#${chapterId} .quiz-results`);
            resultsDiv.style.display = 'block';
            
            const scoreText = translations[currentLang].scoreText;
            document.getElementById(`score-${chapterId}`).textContent = `${scoreText} ${state.score} / ${state.questions.length} c√¢u.`;
        }

        function askAI() {
            const activeChapter = document.querySelector('.tab-pane.active');
            const titleElement = activeChapter.querySelector('.theory-content h2');
            if (titleElement) {
                let topic = titleElement.textContent.trim();
                // Lo·∫°i b·ªè s·ªë ch∆∞∆°ng ƒë·ªÉ c√¢u h·ªèi t·ª± nhi√™n h∆°n
                topic = topic.replace(/Chapter \d+:|Ch∆∞∆°ng \d+:/i, '').trim();

                // T·∫°o c√¢u h·ªèi c·ª• th·ªÉ cho AI
                const promptText = currentLang === 'vi' 
                    ? `H√£y gi·∫£i th√≠ch chi ti·∫øt v·ªÅ ch·ªß ƒë·ªÅ sau trong Khoa h·ªçc m√°y t√≠nh: "${topic}"`
                    : `Please provide a detailed explanation of the following topic in Computer Science: "${topic}"`;

                const encodedPrompt = encodeURIComponent(promptText);
                // D·∫´n th·∫≥ng ƒë·∫øn Google Gemini v·ªõi c√¢u h·ªèi ƒë√£ ƒë∆∞·ª£c ƒëi·ªÅn s·∫µn
                const url = `https://gemini.google.com/app?prompt=${encodedPrompt}`;
                
                window.open(url, '_blank');
            }
        }
    </script>
</body>
</html>
